import{r as v,o as lt,c as dt,w as ut,ad as ct,n as pt,a as n,e as r,i as e,x as i,C as t,F as k,u as y,j as d,M as B,q as mt,U as gt,ak as kt,v as ht,$ as vt}from"./@vue-D5jJVPgi.js";import{_ as yt,b as l}from"./index-DKlg7ZIG.js";import"./pinia-BWRdMQcg.js";import"./bootstrap-r_TW8pGT.js";import"./@popperjs-BEKk9TLb.js";import"./bootstrap-vue-next-CI7J1iGq.js";import"./izitoast-CqdWWGAA.js";import"./sweetalert2-89IKscqO.js";import"./@fortawesome-BMRTUbaC.js";import"./jspdf-BHjgPkY0.js";import"./@babel-BgpAVVkQ.js";import"./fflate-DE92GPtl.js";import"./@vueuse-BFKO5FPz.js";import"./xlsx-VQGdcWwX.js";import"./jspdf-autotable-DwCSpOYb.js";import"./@tsparticles-RHRfPQQI.js";import"./pinia-plugin-persistedstate-BuM6D3kL.js";import"./destr-BPvN1X9m.js";import"./deep-pick-omit-CegYQlcN.js";import"./vue-router-Ds9KUoJm.js";import"./lodash-CW-aI5JM.js";import"./crypto-js-C9xuVu9R.js";import"./axios-xsH4HHeE.js";import"./qs-Dop67Io4.js";import"./side-channel-DfNisRws.js";import"./es-errors-CxTyLFAO.js";import"./object-inspect-CwG9orBb.js";import"./side-channel-list-CVgrowBt.js";import"./side-channel-map-Czb7NFry.js";import"./get-intrinsic-BpLglCTt.js";import"./es-object-atoms-BR76m4z7.js";import"./math-intrinsics-DP1tGiab.js";import"./gopd-C1lCZ5Qs.js";import"./es-define-property-D_7cP-M3.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-Cd0SCNDH.js";import"./dunder-proto-DSwuxXkl.js";import"./call-bind-apply-helpers-VtLnLD2e.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bound-BuGV4nFB.js";import"./side-channel-weakmap-DmcBNuf_.js";import"./smooth-scrollbar-CSiRJ_Pw.js";import"./core-js-BA3D9nVJ.js";import"./@vueform-b-21xuRD.js";import"./vue3-circle-progress-DRe7pzrA.js";import"./vue-Aiaqh0QQ.js";import"./vue3-apexcharts-CSHbnzTQ.js";import"./apexcharts-AYwITVQt.js";const bt={key:0},Pt={key:1},_t={key:2},Tt=["disabled"],Et={key:0},Mt=["value"],Ct={key:1,class:"text-success"},St={key:2,class:"text-danger"},ft={key:0},Ot={key:1},Lt={key:2},wt=["disabled"],xt={key:0},At=["disabled"],It={key:0,class:"text-danger"},Dt=["disabled"],Ft={key:0},qt=["value"],Gt={key:1},Ut=["disabled"],Nt={key:0},Bt={key:0},Rt={key:1},zt={key:2},$t={class:"pagination-controls"},Vt=["disabled"],Ht=["disabled"],Kt={class:"page-links"},jt=["onClick"],Wt=["max"],Jt={__name:"Dashboard",setup(Qt){const{data:R,error:M,isLoading:z,request:$}=l("/v1/admin/countries",{transform:a=>{var u;return(((u=a==null?void 0:a.dataPayload)==null?void 0:u.data)||[]).map(s=>{var c;return{id:s.id,code:s.code,name:s.name,citizenship:s.citizenship,status:((c=s.status)==null?void 0:c.label)||"Unknown"}})},onLoading:()=>console.log("Fetching started..."),onSuccess:a=>console.log("Success!",a),onComplete:({status:a})=>console.log(`Completed with status: ${a}`)}),V=v({code:"ET",name:"ETHOPIA",citizenship:"Ethiopian"}),{request:H,isLoading:b,progress:C,error:K,status:S}=l("/v1/admin/country",{method:"POST",useAuth:!0,autoFetch:!1,autoAlert:!0}),j=()=>{H(V.value)},{batchRequest:W,data:g,error:P}=l("",{useAuth:!0}),J=async()=>{try{await W([{url:"/v1/admin/countries",method:"GET",requestName:"countries"},{url:"/v1/admin/currencies",method:"GET",requestName:"currencies"}]),console.log("Batch Data:",g.value)}catch(a){console.error("Batch Error:",P.value||a)}};lt(()=>{$(),J()});const Q=dt(()=>Array.isArray(g.value)&&g.value.length>0),{request:X,data:f,isLoading:O}=l("/api/spaces",{method:"POST",mock:(a,o,u)=>({id:999,name:a.name,methodUsed:u,receivedAt:new Date().toISOString()}),autoFetch:!1}),{request:Y,error:L,isLoading:w}=l("/api/fail-check",{method:"GET",mock:{simulateError:!0,delay:1e3,error:["Oops! Something went wrong"]},autoFetch:!1}),{request:Z,isLoading:_,progress:x,data:A}=l("/api/upload",{method:"POST",mock:{simulateProgress:!0,delay:2e3,data:{success:!0}},autoFetch:!1}),{request:tt,data:I,isLoading:D}=l("/api/space",{method:"GET",mock:{once:!0,delay:500,data:{mockData:"Shown once only"}},autoFetch:!1}),ot=()=>X({name:"Mock Room"}),et=()=>Z(),st=()=>Y(),at=()=>tt(),{data:F,nextPage:q,prevPage:G,goToPage:T,currentPage:p,totalPages:E,pages:it,isLoading:nt,error:U}=l("/v1/iam/rbac/permission",{method:"GET",pagination:!0,perPage:5,autoFetch:!0,transformPagination:a=>{const o=(a==null?void 0:a.dataPayload)||{};return{totalItems:o.totalCount,currentPage:o.currentPage,perPage:o.perPage,totalPages:o.totalPages}},transform:a=>{var o;return((o=a==null?void 0:a.dataPayload)==null?void 0:o.data)??[]}}),m=v(p.value);ut(p,a=>m.value=a),console.log("PAGINATIN DATA",F);const N=v([]),h=v(null),{realtime:rt}=l("",{method:"GET",autoFetch:!0,realtimeOptions:{enabled:!0,protocol:"ws",realtimeUrl:"ws://localhost:8080/",realtimeParams:{topic:"space_updates"},onNotification:a=>{console.log("[NOTIFICATION]",a)},onRealtimeMessage:a=>{console.log("[REALTIME MESSAGE]",a),N.value.push({timestamp:new Date().toISOString(),...a})}}});return ct(()=>{pt(()=>{h.value&&(h.value.scrollTop=h.value.scrollHeight)})}),(a,o)=>{var u;return r(),n(k,null,[e("div",null,[e("h3",null,"Status: "+i((u=t(rt))==null?void 0:u.status),1),o[5]||(o[5]=e("h4",null,"Live Incoming Messages",-1)),e("div",{ref_key:"logContainer",ref:h,class:"log-container"},[(r(!0),n(k,null,y(t(N),(s,c)=>(r(),n("div",{key:c,class:"log-entry"},[e("pre",null,i(s),1)]))),128))],512)]),e("div",null,[o[6]||(o[6]=e("h2",null,"Country List",-1)),t(z)?(r(),n("div",bt,"Loading...")):t(M)?(r(),n("div",Pt,"Error: "+i(t(M)),1)):(r(),n("ul",_t,[(r(!0),n(k,null,y(t(R),s=>(r(),n("li",{key:s.id},i(s.name)+" ("+i(s.code)+") - "+i(s.citizenship)+" | Status: "+i(s.status),1))),128))]))]),e("div",null,[o[7]||(o[7]=e("h2",null,"Create Country",-1)),e("button",{onClick:j,disabled:t(b)},i(t(b)?"Posting...":"Create Country"),9,Tt),t(b)?(r(),n("div",Et,[B(" Uploading: "+i(t(C))+"% ",1),e("progress",{value:t(C),max:"100",style:{width:"100%"}},null,8,Mt)])):d("",!0),t(S)==="success"?(r(),n("div",Ct,"Country created successfully!")):d("",!0),t(S)==="error"?(r(),n("div",St,"Error: "+i(t(K)),1)):d("",!0)]),e("div",null,[o[10]||(o[10]=e("h2",null,"Batch Result",-1)),t(P)?(r(),n("div",ft,"Error: "+i(t(P)),1)):Q.value?(r(),n("div",Lt,[o[8]||(o[8]=e("h3",null,"Countries",-1)),e("ul",null,i(t(g)[0]),1),o[9]||(o[9]=e("h3",null,"Currencies",-1)),e("ul",null,i(t(g)[1]),1)])):(r(),n("div",Ot,"Loading..."))]),e("div",null,[o[15]||(o[15]=e("h2",null,"🔧 Mock API Test Section",-1)),e("div",null,[o[11]||(o[11]=e("h3",null,"Mock POST /api/spaces",-1)),e("button",{class:"btn btn-success",onClick:ot,disabled:t(O)},i(t(O)?"Posting...":"Test Post Mock"),9,wt),t(f)?(r(),n("pre",xt,i(t(f)),1)):d("",!0)]),e("div",null,[o[12]||(o[12]=e("h3",null,"Mock GET /api/fail-check (Error Simulation)",-1)),e("button",{class:"btn btn-success",onClick:st,disabled:t(w)},i(t(w)?"Simulating...":"Trigger Error"),9,At),t(L)?(r(),n("pre",It,i(t(L)),1)):d("",!0)]),e("div",null,[o[13]||(o[13]=e("h3",null,"Mock POST /api/upload (With Progress)",-1)),e("button",{class:"btn btn-success",onClick:et,disabled:t(_)},i(t(_)?"Uploading...":"Test Upload Mock"),9,Dt),t(_)?(r(),n("div",Ft,[B(" Upload Progress: "+i(t(x))+"% ",1),e("progress",{value:t(x),max:"100",style:{width:"100%"}},null,8,qt)])):d("",!0),t(A)?(r(),n("pre",Gt,i(t(A)),1)):d("",!0)]),e("div",null,[o[14]||(o[14]=e("h3",null,"Mock GET /api/space (Once Only)",-1)),e("button",{class:"btn btn-success",onClick:at,disabled:t(D)},i(t(D)?"Fetching...":"Fetch Once Only Mock"),9,Ut),t(I)?(r(),n("pre",Nt,i(t(I)),1)):d("",!0)])]),e("div",null,[o[17]||(o[17]=e("h2",null,"📄 Paginated Permissions",-1)),t(nt)?(r(),n("div",Bt,"Loading permissions...")):t(U)?(r(),n("div",Rt,"Error: "+i(t(U)),1)):(r(),n("div",zt,[e("ul",null,[(r(!0),n(k,null,y(t(F),(s,c)=>(r(),n("li",{key:s.id||c},i(s.name||s),1))),128))]),e("div",$t,[e("button",{class:"btn btn-success",onClick:o[0]||(o[0]=(...s)=>t(G)&&t(G)(...s)),disabled:t(p)<=1}," ⏮ Prev ",8,Vt),e("span",null,"Page "+i(t(p))+" of "+i(t(E)),1),e("button",{class:"btn btn-success",onClick:o[1]||(o[1]=(...s)=>t(q)&&t(q)(...s)),disabled:t(p)>=t(E)}," Next ⏭ ",8,Ht)]),e("div",Kt,[(r(!0),n(k,null,y(t(it),s=>(r(),n("button",{key:s,class:mt({active:t(p)===s}),onClick:c=>t(T)(s)},i(s),11,jt))),128))]),e("div",null,[o[16]||(o[16]=e("label",{for:"goToPage"},"Go to page:",-1)),gt(e("input",{id:"goToPage",type:"number",min:1,max:t(E),"onUpdate:modelValue":o[2]||(o[2]=s=>vt(m)?m.value=s:null),onKeyup:o[3]||(o[3]=ht(s=>t(T)(t(m)),["enter"]))},null,40,Wt),[[kt,t(m),void 0,{number:!0}]]),e("button",{onClick:o[4]||(o[4]=s=>t(T)(t(m)))},"Go")])]))])],64)}}},jo=yt(Jt,[["__scopeId","data-v-d502239a"]]);export{jo as default};
