import{ai as rt,af as r,ag as v,ax as dt,aA as ut,as as ct,aE as gt,ay as pt,a3 as l,a4 as i,a5 as o,aa as n,ah as t,al as k,aD as y,a6 as d,a9 as B,au as mt,ap as kt,aC as ht,aF as vt,aG as yt}from"./index-CTt-D8ZI.js";const bt={key:0},Pt={key:1},_t={key:2},Et=["disabled"],Tt={key:0},Ct=["value"],Mt={key:1,class:"text-success"},St={key:2,class:"text-danger"},ft={key:0},Ot={key:1},Lt={key:2},At=["disabled"],xt={key:0},wt=["disabled"],Dt={key:0,class:"text-danger"},It=["disabled"],Ft={key:0},Gt=["value"],qt={key:1},Nt=["disabled"],Ut={key:0},Bt={key:0},Rt={key:1},zt={key:2},Vt={class:"pagination-controls"},$t=["disabled"],Ht=["disabled"],Kt={class:"page-links"},Wt=["onClick"],jt=["max"],Jt={__name:"Dashboard",setup(Qt){const{data:R,error:C,isLoading:z,request:V}=r("/v1/admin/countries",{transform:a=>{var u;return(((u=a==null?void 0:a.dataPayload)==null?void 0:u.data)||[]).map(s=>{var c;return{id:s.id,code:s.code,name:s.name,citizenship:s.citizenship,status:((c=s.status)==null?void 0:c.label)||"Unknown"}})},onLoading:()=>console.log("Fetching started..."),onSuccess:a=>console.log("Success!",a),onComplete:({status:a})=>console.log(`Completed with status: ${a}`)}),$=v({code:"ET",name:"ETHOPIA",citizenship:"Ethiopian"}),{request:H,isLoading:b,progress:M,error:K,status:S}=r("/v1/admin/country",{method:"POST",useAuth:!0,autoFetch:!1,autoAlert:!0}),W=()=>{H($.value)},{batchRequest:j,data:m,error:P}=r("",{useAuth:!0}),J=async()=>{try{await j([{url:"/v1/admin/countries",method:"GET",requestName:"countries"},{url:"/v1/admin/currencies",method:"GET",requestName:"currencies"}]),console.log("Batch Data:",m.value)}catch(a){console.error("Batch Error:",P.value||a)}};dt(()=>{V(),J()});const Q=ut(()=>Array.isArray(m.value)&&m.value.length>0),{request:X,data:f,isLoading:O}=r("/api/spaces",{method:"POST",mock:(a,e,u)=>({id:999,name:a.name,methodUsed:u,receivedAt:new Date().toISOString()}),autoFetch:!1}),{request:Y,error:L,isLoading:A}=r("/api/fail-check",{method:"GET",mock:{simulateError:!0,delay:1e3,error:["Oops! Something went wrong"]},autoFetch:!1}),{request:Z,isLoading:_,progress:x,data:w}=r("/api/upload",{method:"POST",mock:{simulateProgress:!0,delay:2e3,data:{success:!0}},autoFetch:!1}),{request:tt,data:D,isLoading:I}=r("/api/space",{method:"GET",mock:{once:!0,delay:500,data:{mockData:"Shown once only"}},autoFetch:!1}),et=()=>X({name:"Mock Room"}),ot=()=>Z(),st=()=>Y(),at=()=>tt(),{data:F,nextPage:G,prevPage:q,goToPage:E,currentPage:g,totalPages:T,pages:nt,isLoading:lt,error:N}=r("/v1/iam/rbac/permission",{method:"GET",pagination:!0,perPage:5,autoFetch:!0,transformPagination:a=>{const e=(a==null?void 0:a.dataPayload)||{};return{totalItems:e.totalCount,currentPage:e.currentPage,perPage:e.perPage,totalPages:e.totalPages}},transform:a=>{var e;return((e=a==null?void 0:a.dataPayload)==null?void 0:e.data)??[]}}),p=v(g.value);ct(g,a=>p.value=a),console.log("PAGINATIN DATA",F);const U=v([]),h=v(null),{realtime:it}=r("",{method:"GET",autoFetch:!0,realtimeOptions:{enabled:!0,protocol:"ws",realtimeUrl:"ws://localhost:8080/",realtimeParams:{topic:"space_updates"},onNotification:a=>{console.log("[NOTIFICATION]",a)},onRealtimeMessage:a=>{console.log("[REALTIME MESSAGE]",a),U.value.push({timestamp:new Date().toISOString(),...a})}}});return gt(()=>{pt(()=>{h.value&&(h.value.scrollTop=h.value.scrollHeight)})}),(a,e)=>{var u;return i(),l(k,null,[o("div",null,[o("h3",null,"Status: "+n((u=t(it))==null?void 0:u.status),1),e[5]||(e[5]=o("h4",null,"Live Incoming Messages",-1)),o("div",{ref_key:"logContainer",ref:h,class:"log-container"},[(i(!0),l(k,null,y(t(U),(s,c)=>(i(),l("div",{key:c,class:"log-entry"},[o("pre",null,n(s),1)]))),128))],512)]),o("div",null,[e[6]||(e[6]=o("h2",null,"Country List",-1)),t(z)?(i(),l("div",bt,"Loading...")):t(C)?(i(),l("div",Pt,"Error: "+n(t(C)),1)):(i(),l("ul",_t,[(i(!0),l(k,null,y(t(R),s=>(i(),l("li",{key:s.id},n(s.name)+" ("+n(s.code)+") - "+n(s.citizenship)+" | Status: "+n(s.status),1))),128))]))]),o("div",null,[e[7]||(e[7]=o("h2",null,"Create Country",-1)),o("button",{onClick:W,disabled:t(b)},n(t(b)?"Posting...":"Create Country"),9,Et),t(b)?(i(),l("div",Tt,[B(" Uploading: "+n(t(M))+"% ",1),o("progress",{value:t(M),max:"100",style:{width:"100%"}},null,8,Ct)])):d("",!0),t(S)==="success"?(i(),l("div",Mt,"Country created successfully!")):d("",!0),t(S)==="error"?(i(),l("div",St,"Error: "+n(t(K)),1)):d("",!0)]),o("div",null,[e[10]||(e[10]=o("h2",null,"Batch Result",-1)),t(P)?(i(),l("div",ft,"Error: "+n(t(P)),1)):Q.value?(i(),l("div",Lt,[e[8]||(e[8]=o("h3",null,"Countries",-1)),o("ul",null,n(t(m)[0]),1),e[9]||(e[9]=o("h3",null,"Currencies",-1)),o("ul",null,n(t(m)[1]),1)])):(i(),l("div",Ot,"Loading..."))]),o("div",null,[e[15]||(e[15]=o("h2",null,"🔧 Mock API Test Section",-1)),o("div",null,[e[11]||(e[11]=o("h3",null,"Mock POST /api/spaces",-1)),o("button",{class:"btn btn-success",onClick:et,disabled:t(O)},n(t(O)?"Posting...":"Test Post Mock"),9,At),t(f)?(i(),l("pre",xt,n(t(f)),1)):d("",!0)]),o("div",null,[e[12]||(e[12]=o("h3",null,"Mock GET /api/fail-check (Error Simulation)",-1)),o("button",{class:"btn btn-success",onClick:st,disabled:t(A)},n(t(A)?"Simulating...":"Trigger Error"),9,wt),t(L)?(i(),l("pre",Dt,n(t(L)),1)):d("",!0)]),o("div",null,[e[13]||(e[13]=o("h3",null,"Mock POST /api/upload (With Progress)",-1)),o("button",{class:"btn btn-success",onClick:ot,disabled:t(_)},n(t(_)?"Uploading...":"Test Upload Mock"),9,It),t(_)?(i(),l("div",Ft,[B(" Upload Progress: "+n(t(x))+"% ",1),o("progress",{value:t(x),max:"100",style:{width:"100%"}},null,8,Gt)])):d("",!0),t(w)?(i(),l("pre",qt,n(t(w)),1)):d("",!0)]),o("div",null,[e[14]||(e[14]=o("h3",null,"Mock GET /api/space (Once Only)",-1)),o("button",{class:"btn btn-success",onClick:at,disabled:t(I)},n(t(I)?"Fetching...":"Fetch Once Only Mock"),9,Nt),t(D)?(i(),l("pre",Ut,n(t(D)),1)):d("",!0)])]),o("div",null,[e[17]||(e[17]=o("h2",null,"📄 Paginated Permissions",-1)),t(lt)?(i(),l("div",Bt,"Loading permissions...")):t(N)?(i(),l("div",Rt,"Error: "+n(t(N)),1)):(i(),l("div",zt,[o("ul",null,[(i(!0),l(k,null,y(t(F),(s,c)=>(i(),l("li",{key:s.id||c},n(s.name||s),1))),128))]),o("div",Vt,[o("button",{class:"btn btn-success",onClick:e[0]||(e[0]=(...s)=>t(q)&&t(q)(...s)),disabled:t(g)<=1}," ⏮ Prev ",8,$t),o("span",null,"Page "+n(t(g))+" of "+n(t(T)),1),o("button",{class:"btn btn-success",onClick:e[1]||(e[1]=(...s)=>t(G)&&t(G)(...s)),disabled:t(g)>=t(T)}," Next ⏭ ",8,Ht)]),o("div",Kt,[(i(!0),l(k,null,y(t(nt),s=>(i(),l("button",{key:s,class:mt({active:t(g)===s}),onClick:c=>t(E)(s)},n(s),11,Wt))),128))]),o("div",null,[e[16]||(e[16]=o("label",{for:"goToPage"},"Go to page:",-1)),kt(o("input",{id:"goToPage",type:"number",min:1,max:t(T),"onUpdate:modelValue":e[2]||(e[2]=s=>yt(p)?p.value=s:null),onKeyup:e[3]||(e[3]=vt(s=>t(E)(t(p)),["enter"]))},null,40,jt),[[ht,t(p),void 0,{number:!0}]]),o("button",{onClick:e[4]||(e[4]=s=>t(E)(t(p)))},"Go")])]))])],64)}}},Yt=rt(Jt,[["__scopeId","data-v-d502239a"]]);export{Yt as default};
