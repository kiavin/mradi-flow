import{w as C,z as L,A as M,c as W,B as d,C as j}from"./@vue-D5jJVPgi.js";function $(t){return L()?(M(t),!0):!1}const T=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const R=Object.prototype.toString,x=t=>R.call(t)==="[object Object]",p=()=>{},B=D();function D(){var t,i;return T&&((t=window==null?void 0:window.navigator)==null?void 0:t.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((i=window==null?void 0:window.navigator)==null?void 0:i.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function A(t){return Array.isArray(t)?t:[t]}function F(t,i,u){return C(t,i,{...u,immediate:!0})}const I=T?window:void 0;function h(t){var i;const u=d(t);return(i=u==null?void 0:u.$el)!=null?i:u}function S(...t){const i=[],u=()=>{i.forEach(r=>r()),i.length=0},c=(r,o,l,a)=>(r.addEventListener(o,l,a),()=>r.removeEventListener(o,l,a)),f=W(()=>{const r=A(d(t[0])).filter(o=>o!=null);return r.every(o=>typeof o!="string")?r:void 0}),g=F(()=>{var r,o;return[(o=(r=f.value)==null?void 0:r.map(l=>h(l)))!=null?o:[I].filter(l=>l!=null),A(d(f.value?t[1]:t[0])),A(j(f.value?t[2]:t[1])),d(f.value?t[3]:t[2])]},([r,o,l,a])=>{if(u(),!(r!=null&&r.length)||!(o!=null&&o.length)||!(l!=null&&l.length))return;const y=x(a)?{...a}:a;i.push(...r.flatMap(v=>o.flatMap(m=>l.map(b=>c(v,m,b,y)))))},{flush:"post"}),w=()=>{g(),u()};return $(u),w}let O=!1;function q(t,i,u={}){const{window:c=I,ignore:f=[],capture:g=!0,detectIframe:w=!1,controls:r=!1}=u;if(!c)return r?{stop:p,cancel:p,trigger:p}:p;if(B&&!O){O=!0;const e={passive:!0};Array.from(c.document.body.children).forEach(n=>n.addEventListener("click",p,e)),c.document.documentElement.addEventListener("click",p,e)}let o=!0;const l=e=>d(f).some(n=>{if(typeof n=="string")return Array.from(c.document.querySelectorAll(n)).some(s=>s===e.target||e.composedPath().includes(s));{const s=h(n);return s&&(e.target===s||e.composedPath().includes(s))}});function a(e){const n=d(e);return n&&n.$.subTree.shapeFlag===16}function y(e,n){const s=d(e),E=s.$.subTree&&s.$.subTree.children;return E==null||!Array.isArray(E)?!1:E.some(k=>k.el===n.target||n.composedPath().includes(k.el))}const v=e=>{const n=h(t);if(e.target!=null&&!(!(n instanceof Element)&&a(t)&&y(t,e))&&!(!n||n===e.target||e.composedPath().includes(n))){if("detail"in e&&e.detail===0&&(o=!l(e)),!o){o=!0;return}i(e)}};let m=!1;const b=[S(c,"click",e=>{m||(m=!0,setTimeout(()=>{m=!1},0),v(e))},{passive:!0,capture:g}),S(c,"pointerdown",e=>{const n=h(t);o=!l(e)&&!!(n&&!e.composedPath().includes(n))},{passive:!0}),w&&S(c,"blur",e=>{setTimeout(()=>{var n;const s=h(t);((n=c.document.activeElement)==null?void 0:n.tagName)==="IFRAME"&&!(s!=null&&s.contains(c.document.activeElement))&&i(e)},0)},{passive:!0})].filter(Boolean),P=()=>b.forEach(e=>e());return r?{stop:P,cancel:()=>{o=!1},trigger:e=>{o=!0,v(e),o=!1}}:P}export{q as o};
