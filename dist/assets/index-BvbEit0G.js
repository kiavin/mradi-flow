import{ai as m,a3 as d,a4 as n,a7 as s,a8 as o,a5 as a,aj as _,ab as B,a6 as v,a9 as p,aa as D,ak as j,ac as C,ad as F,ae as N,af as T,ag as U,al as I,ah as L}from"./index-BCSCcxgM.js";import{I as S}from"./BaseInput-CrO91Evm.js";import{_ as O}from"./BaseButton-B3gpu9lW.js";import{L as V}from"./BaseLabel-Ca75fpND.js";/* empty css                                                                  */const A={class:"login-content"},q={class:"mb-3"},M={key:0,class:"text-danger mt-1"},R={class:"mb-3"},$={key:0,class:"text-danger mt-1"},E={class:"d-flex justify-content-between align-items-center mb-3"},G={class:"text-center mb-3"},z={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},H={__name:"form",props:{formData:Object,error:Object,isLoading:Boolean,readonly:{type:Boolean,default:!1},hideSubmit:{type:Boolean,default:!1},onSubmit:Function},emits:["submit"],setup(t,{emit:g}){const w=t,c=g,u=()=>{c("submit",w.formData)};return(h,e)=>{const f=m("Logo"),b=m("router-link"),k=m("b-card"),r=m("b-col"),l=m("b-row");return n(),d("section",A,[s(l,{class:"m-0 align-items-center justify-content-center bg-white-200 min-vh-100 login-page"},{default:o(()=>[s(r,{cols:"12",md:"8",lg:"6",xl:"4",class:"px-3",style:{width:"450px"}},{default:o(()=>[s(k,{class:"shadow-sm p-4 text-center mt-3","body-class":"p-0"},{default:o(()=>{var i,y;return[s(b,{to:{name:"iam/auth/login"},class:"navbar-brand d-flex align-items-center justify-content-center mb-3"},{default:o(()=>[e[0]||(_(-1,!0),(e[0]=s(f)).cacheIndex=0,_(1),e[0])]),_:1}),e[7]||(e[7]=a("p",{class:"mb-4"},"Login to stay connected.",-1)),a("form",{onSubmit:B(u,["prevent"]),class:"text-start"},[a("div",q,[s(V,{class:"form-label",labelFor:"username"},{default:o(()=>e[3]||(e[3]=[p("Username")])),_:1}),s(S,{id:"username",type:"text",modelValue:t.formData.username,"onUpdate:modelValue":e[1]||(e[1]=x=>t.formData.username=x),disabled:t.readonly,class:"form-control"},null,8,["modelValue","disabled"]),(i=t.error)!=null&&i.username?(n(),d("p",M,D(t.error.username),1)):v("",!0)]),a("div",R,[s(V,{class:"form-label",labelFor:"password"},{default:o(()=>e[4]||(e[4]=[p("Password")])),_:1}),s(S,{id:"password",type:"password",modelValue:t.formData.password,"onUpdate:modelValue":e[2]||(e[2]=x=>t.formData.password=x),disabled:t.readonly,class:"form-control"},null,8,["modelValue","disabled"]),(y=t.error)!=null&&y.password?(n(),d("p",$,D(t.error.password),1)):v("",!0)]),a("div",E,[e[6]||(e[6]=a("div",{class:"form-check"},[a("input",{type:"checkbox",class:"form-check-input",id:"customCheck1"}),a("label",{class:"form-check-label",for:"customCheck1"},"Remember Me")],-1)),s(b,{to:{name:"iam/resetpasswordrequest/index"}},{default:o(()=>e[5]||(e[5]=[p("Forgot Password?")])),_:1})]),a("div",G,[s(O,{type:"submit",customClass:"btn btn-primary w-100",disabled:t.isLoading},{default:o(()=>[t.isLoading?(n(),d("span",z)):(n(),d(j,{key:1},[p(" LOGIN ")],64))]),_:1},8,["disabled"])])],32)]}),_:1})]),_:1})]),_:1})])}}},J="/v1/iam/auth/login",Z={__name:"index",setup(t){const g=C(),w=F(),c=N(),{data:u,request:h,isLoading:e,error:f}=T(J,{method:"POST"}),b=U({username:"",password:""}),k=async r=>{if(await h(r),f.value)return;const{access_token:l,userData:i}=u.value.dataPayload.data;l&&c.setToken(l,r==null?void 0:r.username),i&&c.setUserData(i),w.show(u.value),setTimeout(()=>{g.push({name:"dashboard"})},2e3)};return(r,l)=>(n(),I(H,{formData:b.value,error:L(f),isLoading:L(e),onSubmit:k},null,8,["formData","error","isLoading"]))}};export{Z as default};
