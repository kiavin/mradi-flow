import{ag as V,ar as x,ai as l,al as S,a4 as r,a8 as i,a3 as m,a7 as n,a5 as f,ab as L,a6 as c,aa as b,a9 as _}from"./index-C9QpY-AJ.js";import{_ as C}from"./SelectComponent-jbS4Klq4.js";const F={key:0,class:"text-center py-5"},M={key:0,class:"text-danger"},U={key:0,class:"text-danger"},h={key:0,class:"text-danger"},q={key:0,class:"d-flex flex-wrap mt-4 justify-content-center"},I={__name:"form",props:{formData:{type:Array,default:()=>[]},Financiers:{type:Array,default:()=>[]},prefill:Boolean,isLoading:Boolean,readonly:{type:Boolean,default:!1},hideSubmit:{type:Boolean,default:!1},error:Object,onSubmit:Function},emits:["submit","update"],setup(a,{emit:k}){const u=a,g=V(""),s=V(""),A=k;x(()=>u.Financiers,t=>{Array.isArray(t)&&(g.value=t)},{immediate:!0}),u.prefill&&x(()=>{var t;return(t=u.formData)==null?void 0:t.financiers},t=>{if(Array.isArray(t)){const e=t.map(y=>y.financier_id);console.log("Mapped Financier IDs:",e),s.value=e}},{immediate:!0,deep:!0});const B=()=>{const t={...u.formData,financiers:Array.isArray(s.value)?s.value.map(e=>({financier_id:e})):[]};A("submit",t)};return(t,e)=>{const y=l("b-spinner"),v=l("b-form-input"),p=l("b-form-group"),D=l("b-button"),N=l("b-form"),j=l("b-card-body");return r(),S(j,null,{default:i(()=>[a.isLoading?(r(),m("div",F,[n(y,{variant:"primary"}),e[3]||(e[3]=f("p",null,"Loading data...",-1))])):(r(),S(N,{key:1,onSubmit:L(B,["prevent"])},{default:i(()=>[n(p,null,{default:i(()=>{var o;return[e[4]||(e[4]=f("label",{for:"project-name",class:"form-label"},"Name",-1)),n(v,{id:"project-name",modelValue:a.formData.name,"onUpdate:modelValue":e[0]||(e[0]=d=>a.formData.name=d),type:"text",disabled:a.readonly,placeholder:"e.g. Nairobi Phase 2 Housing",required:""},null,8,["modelValue","disabled"]),(o=a.error)!=null&&o.name?(r(),m("p",M,b(a.error.name),1)):c("",!0)]}),_:1}),n(p,{class:"mt-3"},{default:i(()=>{var o;return[e[5]||(e[5]=f("label",{for:"tender-amount",class:"form-label"},"Bid Amount (KES)",-1)),n(v,{id:"tender-amount",modelValue:a.formData.bid_amount,"onUpdate:modelValue":e[1]||(e[1]=d=>a.formData.bid_amount=d),modelModifiers:{number:!0},type:"number",disabled:a.readonly,min:"0",placeholder:"e.g. 100000000",required:""},null,8,["modelValue","disabled"]),(o=a.error)!=null&&o.tender_amount?(r(),m("p",U,b(a.error.tender_amount),1)):c("",!0)]}),_:1}),n(p,{class:"mt-3"},{default:i(()=>{var o;return[e[6]||(e[6]=f("label",{for:"financiers",class:"form-label"},"Select Financiers",-1)),n(C,{id:"financiers",modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=d=>s.value=d),mode:"tags",options:g.value,"close-on-select":!1,placeholder:"Choose one or more financiers",class:"form-control",disabled:a.readonly},null,8,["modelValue","options","disabled"]),(o=a.error)!=null&&o.financiers?(r(),m("p",h,b(a.error.financiers),1)):c("",!0)]}),_:1}),a.hideSubmit?c("",!0):(r(),m("div",q,[n(D,{type:"submit",variant:"success",class:"me-2",disabled:a.isLoading},{default:i(()=>[_(b(a.isLoading?"Submitting...":"Save"),1)]),_:1},8,["disabled"])]))]),_:1}))]),_:1})}}};export{I as _};
